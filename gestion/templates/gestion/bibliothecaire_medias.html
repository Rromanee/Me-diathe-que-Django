{% extends "gestion/base.html" %}

{% block content %}
<h1>ğŸ’¡ Page BibliothÃ©caire â€“ MÃ©dias</h1>

{% if messages %}
<ul id="messages">
    {% for message in messages %}
        <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<h2>ğŸ“š Livres</h2>
<ul>
{% for livre in livres %}
<li>{{ livre.name }} â€” {{ livre.auteur }}
    {% if livre.est_disponible %}
        âœ… Disponible
        <form method="POST" action="{% url 'emprunter_media' 'livre' livre.id %}" style="display:inline;">
            {% csrf_token %}
            <select name="membre_id">
                <option value="0">-- SÃ©lectionner un membre --</option>
                {% for membre in membres %}
                    <option value="{{ membre.id }}">{{ membre.prenom }} {{ membre.nom }}</option>
                {% endfor %}
            </select>
            <button>ğŸ“Œ Emprunter</button>
        </form>
    {% else %}
        {% if livre.emprunt %}
            âŒ EmpruntÃ© â€” par <strong>{{ livre.emprunt.membre.prenom }} {{ livre.emprunt.membre.nom }}</strong>
            <a href="{% url 'rendre_media' 'livre' livre.id %}">â†©ï¸ Retourner</a>
        {% endif %}
    {% endif %}
    | <a href="{% url 'modifier_media' 'livre' livre.id %}">âœ Modifier</a>
    | <a href="{% url 'supprimer_media' 'livre' livre.id %}">ğŸ—‘ï¸ Supprimer</a>
</li>
{% empty %}
<li>Aucun livre</li>
{% endfor %}
</ul>

<h2>ğŸ’¿ CDs</h2>
<ul>
{% for cd in cds %}
<li>{{ cd.name }} â€” {{ cd.artiste }}
    {% if cd.est_disponible %}
        âœ… Disponible
        <form method="POST" action="{% url 'emprunter_media' 'cd' cd.id %}" style="display:inline;">
            {% csrf_token %}
            <select name="membre_id">
                <option value="0">-- SÃ©lectionner un membre --</option>
                {% for membre in membres %}
                    <option value="{{ membre.id }}">{{ membre.prenom }} {{ membre.nom }}</option>
                {% endfor %}
            </select>
            <button>ğŸ“Œ Emprunter</button>
        </form>
    {% else %}
        {% if cd.emprunt %}
            âŒ EmpruntÃ© â€” par <strong>{{ cd.emprunt.membre.prenom }} {{ cd.emprunt.membre.nom }}</strong>
            <a href="{% url 'rendre_media' 'cd' cd.id %}">â†©ï¸ Retourner</a>
        {% endif %}
    {% endif %}
    | <a href="{% url 'modifier_media' 'cd' cd.id %}">âœ Modifier</a>
    | <a href="{% url 'supprimer_media' 'cd' cd.id %}">ğŸ—‘ï¸ Supprimer</a>
</li>
{% empty %}
<li>Aucun CD</li>
{% endfor %}
</ul>

<h2>ğŸ¬ DVDs</h2>
<ul>
{% for dvd in dvds %}
<li>{{ dvd.name }} â€” {{ dvd.realisateur }}
    {% if dvd.est_disponible %}
        âœ… Disponible
        <form method="POST" action="{% url 'emprunter_media' 'dvd' dvd.id %}" style="display:inline;">
            {% csrf_token %}
            <select name="membre_id">
                <option value="0">-- SÃ©lectionner un membre --</option>
                {% for membre in membres %}
                    <option value="{{ membre.id }}">{{ membre.prenom }} {{ membre.nom }}</option>
                {% endfor %}
            </select>
            <button>ğŸ“Œ Emprunter</button>
        </form>
    {% else %}
        {% if dvd.emprunt %}
            âŒ EmpruntÃ© â€” par <strong>{{ dvd.emprunt.membre.prenom }} {{ dvd.emprunt.membre.nom }}</strong>
            <a href="{% url 'rendre_media' 'dvd' dvd.id %}">â†©ï¸ Retourner</a>
        {% endif %}
    {% endif %}
    | <a href="{% url 'modifier_media' 'dvd' dvd.id %}">âœ Modifier</a>
    | <a href="{% url 'supprimer_media' 'dvd' dvd.id %}">ğŸ—‘ï¸ Supprimer</a>
</li>
{% empty %}
<li>Aucun DVD</li>
{% endfor %}
</ul>

<h2>ğŸ² Jeux de plateau</h2>
<ul>
{% for jeu in jeux %}
<li>{{ jeu.name }} â€” {{ jeu.createur }}
    | <a href="{% url 'modifier_media' 'jeuDePlateau' jeu.id %}">âœ Modifier</a>
    | <a href="{% url 'supprimer_media' 'jeuDePlateau' jeu.id %}">ğŸ—‘ï¸ Supprimer</a>
</li>
{% empty %}
<li>Aucun jeu</li>
{% endfor %}
</ul>

<p>
<a href="{% url 'ajouter_media' 'livre' %}">â• Ajouter un Livre</a> |
<a href="{% url 'ajouter_media' 'cd' %}">â• Ajouter un CD</a> |
<a href="{% url 'ajouter_media' 'dvd' %}">â• Ajouter un DVD</a> |
<a href="{% url 'ajouter_media' 'jeuDePlateau' %}">â• Ajouter un Jeu de Plateau</a>
</p>

<p>
    <a href="{% url 'accueil_bibliothecaire' %}">â¬… Retour espace bibliothÃ©caire</a>
</p>
{% endblock %}